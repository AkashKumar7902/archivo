{% extends "index.html" %}

{% block content %}

<h3>Ontology Info Service</h3>
Select an ontology to get info on its latest version:
<form action="" method="POST" novalidate>
    {{ form.hidden_tag() }}
    {{ form.csrf_token }}
    <p>
        <div style="width: 400px">
            {{ form.uris(**{"onchange":"this.form.submit()"}) }}
        </div>
    </p>
</form>
<br>
{% if general_info.title %}
<h2>{{general_info.title}}</h2>
<p>{{general_info.comment}}</p>

<h4>General Information:</h4>

<p>
    <table style="width:400px; border: 1px solid black;">
        <tr>
            <td><b>Archived</b></td>
            <td>{{general_info.archivement}}</td>
        </tr>
        <tr>
            <td><b>Source</b></td>
            <td>{{general_info.source}}</td>
        </tr>
        <tr>
            <td><b>Databus-Artifact</b></td>
            <td><a href="{{ general_info.databusArtifact }}">Link</a></td>
        </tr>
    </table>
</p>
<br>

<h4>Versions:</h4>
<p>Click the version-link to check out the release on the databus for further information!</p>
<div class="content">
    <p>
        <table>
            <tr>
                <th>Version</th>
                <th>Triples</th>
                <th>Stars</th>
                <th>Semantic Version</th>
                <th>★: Retrieval & Parsing</th>
                <th>★★: License I</th>
                <th>★★★: License II</th>
                <th>★★★★: Consistency</th>
                <th>Lode-Conform</th>
            </tr>
            {% for version in versions_info %}
            <tr>
                <td><a href="{{version.version.url}}">{{version.version.label}}</a></td>
                <td>{{version.triples}}</td>
                <td>{{version.stars}}</td>
                <td>{{version.semversion}}</td>
                <td>
                    {% if version.parsing %}
                        <span class="check">✔</span>
                    {% else %}
                        <span class="x">✘</span>
                    {% endif %}
                </td>
                <td>
                    {% if version.minLicense.conforms %}
                        <a href="{{version.minLicense.url}}" class="check">✔</a>
                    {% else %}
                        <a href="{{version.minLicense.url}}" class="x">✘</a>
                    {% endif %}
                </td>
                <td>
                    {% if version.goodLicense.conforms %}
                        <a href="{{version.goodLicense.url}}" class="check">✔</a>
                    {% else %}
                        <a href="{{version.goodLicense.url}}" class="x">✘</a>
                    {% endif %}
                </td>
                <td>
                    {% if version.consistent.conforms %}
                        <a href="{{version.consistent.url}}" class="check">✔</a>
                    {% else %}
                        <a href="{{version.consistent.url}}" class="x">✘</a>
                    {% endif %}
                </td>
                <td>
                    {% if version.lode.conforms %}
                        <a href="{{version.lode.url}}" class="check">✔</a>
                    {% else %}
                        <a href="{{version.lode.url}}" class="x">✘</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </p>
</div>
{% else %}
<p>{{general_info.message}}</p>
{% endif %}
<script>
    $(document).ready(function() {
        $('#uris').select2({  // init Select2 on form's uris field
            placeholder: "{{ form.uris.label.text }}",
            allowClear: true,
            "width": 500
        });
    });
</script>

{% endblock %}